@import url('https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600;700&family=Merriweather:wght@400;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Warm Philippine-inspired palette */
    --background: 35 30% 97%;
    --foreground: 25 30% 15%;

    --card: 35 40% 99%;
    --card-foreground: 25 30% 15%;

    --popover: 35 40% 99%;
    --popover-foreground: 25 30% 15%;

    /* Purple primary -- matches later-screen gradient */
    --primary: 271 81% 56%;
    --primary-foreground: 0 0% 100%;

    /* Warm cream secondary */
    --secondary: 35 25% 92%;
    --secondary-foreground: 25 30% 20%;

    /* Muted warm gray */
    --muted: 30 15% 90%;
    --muted-foreground: 25 15% 45%;

    /* Teal accent for accessibility info */
    --accent: 175 45% 40%;
    --accent-foreground: 175 10% 98%;

    --destructive: 0 65% 55%;
    --destructive-foreground: 0 0% 100%;

    --border: 30 20% 85%;
    --input: 30 20% 85%;
    --ring: 271 81% 56%;

    --radius: 1rem;

    /* Custom exhibit colors */
    --health: 145 55% 45%;
    --health-bg: 145 40% 90%;
    --stamina: 45 85% 55%;
    --stamina-bg: 45 60% 92%;
    --money: 175 45% 40%;
    --money-bg: 175 30% 90%;

    /* Landmark card gradients */
    --landmark-gradient: linear-gradient(135deg, hsl(271 70% 50%) 0%, hsl(330 70% 55%) 100%);
    --persona-gradient: linear-gradient(145deg, hsl(35 40% 99%) 0%, hsl(30 30% 95%) 100%);
    
    /* Shadows */
    --shadow-card: 0 4px 20px -4px hsl(25 30% 15% / 0.1);
    --shadow-card-hover: 0 8px 30px -4px hsl(25 30% 15% / 0.15);
    --shadow-elevated: 0 12px 40px -8px hsl(25 30% 15% / 0.2);

    --sidebar-background: 0 0% 98%;
    --sidebar-foreground: 240 5.3% 26.1%;
    --sidebar-primary: 240 5.9% 10%;
    --sidebar-primary-foreground: 0 0% 98%;
    --sidebar-accent: 240 4.8% 95.9%;
    --sidebar-accent-foreground: 240 5.9% 10%;
    --sidebar-border: 220 13% 91%;
    --sidebar-ring: 217.2 91.2% 59.8%;
  }

  .dark {
    --background: 25 25% 10%;
    --foreground: 35 30% 95%;

    --card: 25 20% 14%;
    --card-foreground: 35 30% 95%;

    --popover: 25 20% 14%;
    --popover-foreground: 35 30% 95%;

    --primary: 271 81% 65%;
    --primary-foreground: 0 0% 100%;

    --secondary: 25 20% 20%;
    --secondary-foreground: 35 30% 95%;

    --muted: 25 15% 25%;
    --muted-foreground: 30 15% 65%;

    --accent: 175 50% 50%;
    --accent-foreground: 25 25% 10%;

    --destructive: 0 60% 50%;
    --destructive-foreground: 0 0% 100%;

    --border: 25 15% 25%;
    --input: 25 15% 25%;
    --ring: 271 81% 65%;

    --health: 145 50% 50%;
    --health-bg: 145 30% 20%;
    --stamina: 45 80% 50%;
    --stamina-bg: 45 40% 20%;
    --money: 175 50% 50%;
    --money-bg: 175 30% 20%;

    --sidebar-background: 240 5.9% 10%;
    --sidebar-foreground: 240 4.8% 95.9%;
    --sidebar-primary: 224.3 76.3% 48%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 240 3.7% 15.9%;
    --sidebar-accent-foreground: 240 4.8% 95.9%;
    --sidebar-border: 240 3.7% 15.9%;
    --sidebar-ring: 217.2 91.2% 59.8%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground font-sans antialiased;
    font-family: 'Lexend', sans-serif;
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: 'Merriweather', serif;
  }
}

@layer components {
  .exhibit-container {
    @apply min-h-screen p-6 md:p-8 lg:p-12;
    background: transparent;
  }

  .exhibit-card {
    @apply bg-card rounded-2xl p-6 transition-all duration-300;
    box-shadow: var(--shadow-card);
  }

  .exhibit-card:hover {
    box-shadow: var(--shadow-card-hover);
    transform: translateY(-2px);
  }

  .exhibit-card-selected {
    @apply ring-4 ring-primary ring-offset-2 ring-offset-background;
    box-shadow: var(--shadow-elevated);
  }

  .persona-card {
    background: var(--persona-gradient);
    @apply rounded-2xl overflow-hidden transition-all duration-300;
    box-shadow: var(--shadow-card);
  }

  .persona-card:hover {
    box-shadow: var(--shadow-card-hover);
    transform: translateY(-4px) scale(1.02);
  }

  .stat-bar {
    @apply h-4 rounded-full overflow-hidden transition-all duration-500 ease-out;
  }

  .stat-bar-health {
    @apply bg-[hsl(var(--health-bg))];
  }

  .stat-bar-health .stat-bar-fill {
    @apply bg-[hsl(var(--health))];
  }

  .stat-bar-stamina {
    @apply bg-[hsl(var(--stamina-bg))];
  }

  .stat-bar-stamina .stat-bar-fill {
    @apply bg-[hsl(var(--stamina))];
  }

  .stat-bar-money {
    @apply bg-[hsl(var(--money-bg))];
  }

  .stat-bar-money .stat-bar-fill {
    @apply bg-[hsl(var(--money))];
  }

  .stat-bar-fill {
    @apply h-full rounded-full transition-all duration-700 ease-out;
  }

  .landmark-image-wrapper {
    @apply w-full h-44 sm:h-48 overflow-hidden bg-muted;
    border-radius: inherit;
  }

  .exhibit-card.p-0 .landmark-image-wrapper {
    border-radius: 1rem 1rem 0 0;
  }

  .landmark-image {
    @apply w-full h-full object-cover;
    background: var(--landmark-gradient);
  }

  .landmark-image-wrapper .landmark-image[src=""],
  .landmark-image-wrapper .landmark-image:not([src]) {
    @apply opacity-0;
  }

  .hero-ribbon {
    @apply inline-flex items-center gap-2 text-xs md:text-sm font-semibold uppercase tracking-widest;
    @apply bg-primary/10 text-primary px-3 py-1 rounded-full;
  }

  .step-chip {
    @apply inline-flex items-center gap-2 rounded-full bg-secondary px-3 py-1 text-xs font-semibold;
  }

  .map-stage {
    @apply relative rounded-2xl overflow-hidden border bg-card;
    box-shadow: var(--shadow-card);
  }

  .map-pan {
    @apply transition-transform duration-700 ease-out;
  }

  .map-sketch {
    filter: saturate(0.75) contrast(1.08) brightness(1.03);
  }

  .map-overlay {
    @apply pointer-events-none absolute inset-0;
    background-image: linear-gradient(180deg, hsl(var(--foreground) / 0.03), transparent 40%);
  }

  .map-path {
    @apply absolute left-6 top-6 right-6 bottom-6 border-2 border-dashed rounded-xl;
    border-color: hsl(var(--primary) / 0.3);
  }

  .character-token {
    @apply absolute flex items-center justify-center rounded-full border-2;
    width: 44px;
    height: 44px;
    background: hsl(var(--primary));
    color: hsl(var(--primary-foreground));
    border-color: hsl(var(--background));
    box-shadow: var(--shadow-elevated);
    transition: transform 700ms ease, left 700ms ease, top 700ms ease;
    animation: floatToken 3s ease-in-out infinite;
  }

  .character-card {
    @apply rounded-2xl overflow-hidden bg-card;
    box-shadow: var(--shadow-card);
  }

  .character-portrait {
    @apply w-16 h-16 rounded-2xl flex items-center justify-center text-3xl bg-secondary;
  }

  .map-legend {
    @apply absolute right-4 top-4 bg-background/90 border rounded-xl p-3 text-xs;
    box-shadow: var(--shadow-card);
  }

  .slide-in-right {
    animation: slideInRight 0.6s ease-out both;
  }

  .slide-in-left {
    animation: slideInLeft 0.6s ease-out both;
  }

  @keyframes slideInRight {
    from {
      opacity: 0;
      transform: translateX(30px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes slideInLeft {
    from {
      opacity: 0;
      transform: translateX(-30px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes floatToken {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-4px);
    }
  }

  .touch-target {
    @apply min-h-[48px] min-w-[48px];
  }

  .exhibit-title {
    @apply text-3xl md:text-4xl lg:text-5xl font-bold text-foreground leading-tight;
  }

  .exhibit-subtitle {
    @apply text-lg md:text-xl text-muted-foreground leading-relaxed;
  }

  .exhibit-button {
    @apply px-8 py-4 text-lg font-semibold rounded-xl transition-all duration-300 text-white;
    background: linear-gradient(to right, #9333ea, #db2777);
    @apply hover:shadow-lg hover:shadow-purple-500/25;
    @apply active:scale-[0.98];
    @apply focus-visible:outline-none focus-visible:ring-4 focus-visible:ring-purple-400 focus-visible:ring-offset-2;
  }

  .exhibit-button:hover {
    background: linear-gradient(to right, #a855f7, #ec4899);
  }

  .exhibit-button-secondary {
    @apply bg-secondary text-secondary-foreground;
    @apply hover:bg-secondary/80;
  }

  .exhibit-button-accent {
    @apply bg-accent text-accent-foreground;
  }

  .reveal-animation {
    animation: revealSlide 0.6s ease-out forwards;
  }

  @keyframes revealSlide {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .pulse-attention {
    animation: pulseAttention 2s ease-in-out infinite;
  }

  @keyframes pulseAttention {
    0%, 100% {
      box-shadow: 0 0 0 0 rgba(147, 51, 234, 0.4);
    }
    50% {
      box-shadow: 0 0 0 12px rgba(147, 51, 234, 0);
    }
  }

  .bar-decrease {
    animation: barDecrease 0.8s ease-out;
  }

  @keyframes barDecrease {
    0% {
      filter: brightness(1);
    }
    50% {
      filter: brightness(0.7);
    }
    100% {
      filter: brightness(1);
    }
  }

  /* Sketch / cartoon game map */
  .sketch-map-game {
    @apply w-full;
  }

  .sketch-map-paper {
    @apply relative rounded-2xl overflow-hidden border-2;
    background: linear-gradient(145deg, hsl(40 35% 96%) 0%, hsl(35 30% 92%) 100%);
    border-color: hsl(30 25% 82%);
    box-shadow:
      inset 0 1px 0 hsl(0 0% 100% / 0.6),
      0 4px 20px hsl(25 30% 15% / 0.12);
  }

  .sketch-map-svg {
    @apply w-full block;
    height: auto;
    min-height: 200px;
  }

  .sketch-path-bg {
    stroke-dasharray: 4 3;
    animation: sketch-dash 20s linear infinite;
  }

  .sketch-path {
    stroke-dasharray: 6 4;
    animation: sketch-dash 15s linear infinite;
  }

  @keyframes sketch-dash {
    to {
      stroke-dashoffset: -10;
    }
  }

  .sketch-junction {
    stroke-dasharray: 3 2;
  }

  .sketch-character {
    @apply absolute w-10 h-10 flex items-center justify-center rounded-full;
    transform: translate(-50%, -50%);
    background: hsl(var(--primary));
    color: hsl(var(--primary-foreground));
    border: 2px solid hsl(var(--background));
    box-shadow: 0 4px 12px hsl(25 30% 15% / 0.25);
    transition: left 0.6s ease-out, top 0.6s ease-out;
  }

  .sketch-character-emoji {
    @apply text-xl leading-none;
  }

  .sketch-map-rain {
    @apply absolute right-3 top-3 px-2 py-1 rounded-lg;
    background: hsl(210 80% 95%);
    color: hsl(210 70% 35%);
  }

  .sketch-map-fork-label {
    @apply absolute bottom-3 left-1/2 -translate-x-1/2 px-3 py-1.5 rounded-lg;
    background: hsl(var(--background) / 0.9);
    border: 1px solid hsl(var(--border));
  }

  .sketch-map-buttons {
    @apply flex flex-wrap gap-3 mt-4 justify-center;
  }

  .sketch-map-btn {
    @apply px-6 py-3 rounded-xl font-semibold transition-all duration-200;
    @apply bg-primary text-primary-foreground;
    @apply hover:opacity-90 disabled:opacity-50 disabled:pointer-events-none;
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2;
  }

  .sketch-map-btn-left { @apply rounded-l-xl; }
  .sketch-map-btn-straight { @apply rounded-none; }
  .sketch-map-btn-right { @apply rounded-r-xl; }

  /* Solution map (complete map with hazards / advocacy) */
  .solution-map {
    @apply w-full;
  }

  .solution-map-header {
    @apply flex items-start gap-3 mb-3;
  }

  .solution-map-paper {
    @apply rounded-xl border-2 p-4;
    background: linear-gradient(145deg, hsl(145 30% 96%) 0%, hsl(150 25% 94%) 100%);
    border-color: hsl(145 35% 85%);
  }

  .solution-map-simple {
    @apply flex flex-col sm:flex-row gap-4 items-start;
  }

  .solution-map-placeholder {
    @apply flex flex-col items-center justify-center gap-2 rounded-lg border border-dashed border-muted-foreground/30 bg-background/60;
    min-height: 100px;
    min-width: 140px;
  }

  .solution-map-legend {
    @apply flex flex-wrap gap-2 list-none p-0 m-0;
  }

  .solution-map-legend-item {
    @apply flex items-center gap-2 px-3 py-1.5 rounded-lg bg-background/80 border text-sm;
  }

  @keyframes ping {
    75%, 100% {
      transform: scale(2.5);
      opacity: 0;
    }
  }

  /* ‚îÄ‚îÄ Image fallback gradient ‚îÄ‚îÄ */
  .landmark-img-fallback {
    background: linear-gradient(135deg, hsl(var(--primary) / 0.3), hsl(var(--accent) / 0.4), hsl(var(--secondary)));
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .landmark-img-fallback::after {
    content: 'üèõÔ∏è';
    font-size: 3rem;
    opacity: 0.6;
  }

  /* ‚îÄ‚îÄ Animated game background ‚îÄ‚îÄ */
  body {
    background:
      radial-gradient(ellipse at 15% 30%, hsl(260 60% 60% / 0.13) 0%, transparent 50%),
      radial-gradient(ellipse at 85% 20%, hsl(160 70% 45% / 0.12) 0%, transparent 45%),
      radial-gradient(ellipse at 50% 85%, hsl(15 80% 55% / 0.10) 0%, transparent 50%),
      radial-gradient(ellipse at 70% 60%, hsl(40 90% 60% / 0.06) 0%, transparent 40%),
      hsl(var(--background));
    background-attachment: fixed;
    min-height: 100vh;
    position: relative;
    animation: bgPulse 25s ease-in-out infinite alternate;
  }

  @keyframes bgPulse {
    0% { filter: hue-rotate(0deg) brightness(1); }
    50% { filter: hue-rotate(8deg) brightness(1.02); }
    100% { filter: hue-rotate(-5deg) brightness(0.99); }
  }

  body::before,
  body::after {
    content: '';
    position: fixed;
    border-radius: 50%;
    filter: blur(100px);
    pointer-events: none;
    z-index: 0;
  }

  body::before {
    width: 600px;
    height: 600px;
    background: hsl(260 60% 55% / 0.18);
    top: -150px;
    right: -150px;
    animation: floatBlob 16s ease-in-out infinite alternate;
  }

  body::after {
    width: 500px;
    height: 500px;
    background: hsl(160 70% 45% / 0.15);
    bottom: -120px;
    left: -120px;
    animation: floatBlob 16s ease-in-out infinite alternate-reverse;
  }

  @keyframes floatBlob {
    0% { transform: translate(0, 0) scale(1); }
    25% { transform: translate(40px, -30px) scale(1.1); }
    50% { transform: translate(-20px, 40px) scale(0.95); }
    75% { transform: translate(30px, 10px) scale(1.08); }
    100% { transform: translate(-10px, -20px) scale(1.02); }
  }

  /* ‚îÄ‚îÄ Floating particles ‚îÄ‚îÄ */
  .game-particles {
    position: fixed;
    inset: 0;
    z-index: 0;
    overflow: hidden;
    pointer-events: none;
  }

  .particle {
    position: absolute;
    border-radius: 50%;
    opacity: 0;
    animation: particleFloat linear infinite;
    box-shadow: 0 0 6px 2px currentColor;
  }

  @keyframes particleFloat {
    0% {
      opacity: 0;
      transform: translateY(100vh) rotate(0deg) scale(0);
    }
    10% {
      opacity: 0.7;
    }
    50% {
      opacity: 0.4;
    }
    90% {
      opacity: 0.15;
    }
    100% {
      opacity: 0;
      transform: translateY(-20vh) rotate(180deg) scale(1.2);
    }
  }

  /* ‚îÄ‚îÄ Grid overlay for game feel ‚îÄ‚îÄ */
  .game-grid-overlay {
    position: fixed;
    inset: 0;
    z-index: 0;
    pointer-events: none;
    background-image:
      linear-gradient(hsl(var(--foreground) / 0.02) 1px, transparent 1px),
      linear-gradient(90deg, hsl(var(--foreground) / 0.02) 1px, transparent 1px);
    background-size: 60px 60px;
    mask-image: radial-gradient(ellipse at center, black 40%, transparent 75%);
    -webkit-mask-image: radial-gradient(ellipse at center, black 40%, transparent 75%);
  }}